import LiveSandbox from "./components/LiveSandbox.jsx";
import google from "./assets/google.png";
import googleformulare from "./assets/googleformulare.png";
import client_server from "./assets/client-server-api.png";

# Lesson 10 – Http Request / Response mit HTML+JS

Für die Kommunikation wird das http Protokoll verwendet.<br/>
Die **Webapplikation** definiert verschiedene **Endpoints** (Adressen), die der Client anfragen kann.<br/>
Der **Client (Browser)** sendet einen **Request** (Anfrage) an den **Webserver**.<br/>
Der Webserver leitet den Request an die Webapplikation weiter.<br/>
Die Webapplikation verarbeitet die Anfrage.<br/>
Auch Webapplikation können Requests an andere Server (API-Server) senden, zBsp. um Daten von einer API abzurufen.<br/>
Der API-Server sendet eine **Response** (Antwort) zurück an die Webapplikation. Oft im JSON Format.<br/>
Die Webapplikation bereitet die Daten auf, erstellt eine **Response** (Antwort) und sendet über den Webserver zurück an den Client.

<img src={client_server} alt="Client-Server-http" style={{ height: "400px" }} />


## Möglichkeiten einen Request auszulösen

Es gibt verschiedene Möglichkeiten, eine Request auszulösen:

- Wenn Sie **direkt die URL im Browser** eingeben.
- Wenn Sie auf in einer Webseite auf einen **Link klicken**.
- Wenn Sie ein **submit bei einem Formular** absenden.
- Wenn Sie in zBsp durch **onClick über JavaScript** ein `fetch()` oder eine Bibliothek wie `axios` aufrufen.

---

## Request über Link auslösen

Der Hyperlink wird mit dem `<a>`-Tag erstellt.<br/>
Ein Klick auf den Link löst einen _HTTP-GET-Request_ an die im `href`-Attribut angegebene URL.<br/>
Der durch die URL definierte Server sendet als Antwort des angeforderten Endpoints.<br/>
In der Regel HTML der angeforderten Webseite.<br/>
Oder ein Bild als JPG, PNG ... Oder eine Text-Datei ... oder ...

Beispiel:

```html
<a href="https://google.com">Go to Google</a>
```

<img src={google} alt="Google" style={{ height: "120px" }} />

Fügt man beim Request **URL Parameter** hinzu, so reagiert der Server spezifisch auf diese **Parameter-Werte**.<br/>

Beispiel:

```html
<a href="https://www.google.ch/search?q=HTML+Formulare">Such HTML + Formulare</a>
```

<img src={googleformulare} alt="Google Formulare" style={{ height: "170px" }} />

Erklärung:<br/>
- Der Link zeigt auf die Google-Suchseite.<br/>
- Das _?_ trennt die Basis-URL von den Parametern ab.<br/>
- Der Parameter _q_ in der URL enthält den Suchbegriff "HTML Formulare".<br/>
  Die Worte HTML und Formulare sind durch ein Pluszeichen (+) getrennt, das für ein Leerzeichen steht.<br/>

---

## Interaktive Übung zum Link

**Wichtig**:

- Die bestehenden `<div> ...</div>`-Tags nicht löschen
- Weitere `<div>` tags um die `<a>` Tags hinzufügen, damit die Links untereinander stehen.

**Aufgabe:**

- Übernehmen Sie die beiden obigen Beispiele.
- Und klicken Sie in der Preview auf die Links.

**Erweiterung:**

- Erstellen Sie einen Link, der auf der Suchmaschine nach _Auto und Monteverdi_ sucht.

<LiveSandbox
    storageKey="10_Requests_link"
    noInline={false}
    code={`<div>
   <p>Request per Link</p>
</div>
`}
/>

---

## Request über Formulare auslösen

Ein Formular wird mit dem `<form>`-Tag erstellt.<br/><br/>
Beim Absenden des Formulars wird ein HTTP-Request an die im `action`-Attribut angegebene URL gesendet.<br/>
Der Typ des Requests wird durch das `method`-Attribut definiert (GET oder POST).<br/>
Die im Formular eingegebenen Daten werden als Parameter an die URL angehängt (GET) oder im Body des Requests gesendet (POST).<br/>

Beispiel:

```html
<form action="https://www.google.ch/search" method="GET">
    <label for="suchbegriff">Suchbegriff:</label>
    <input type="text" id="suchbegriff" name="q" />
    <button type="submit">Suchen</button>
</form>
```

Erklärung:<br/>
- method="GET" :  Es ist ein GET-Request.<br/>
- name="q" : q ist später der Name des Request-Parameters. Google erkennt diesen Namen.
- Der Eingabe in das Inputfeld wird als Wert des Parameters _q_ an die URL angehängt.

---

## Interaktive Übung zum Formular

**Wichtig**: `<div>` Tag nicht entfernen

**Aufgabe:**

- Übernehmen Sie das obige Formular-Beispiel.
- Geben Sie einen Suchbegriff ein zBsp. Katze. Und klicken Sie auf Suchen.
- Geben Sie einen Suchbegriff mit zwei Worten ein zBsp. Katzen Hai. Und klicken Sie auf Suchen.
    - Betrachten Sie die URL in der Adresszeile des Browsers.<br/><br/>
- Ändern Sie `name="q"` zu `name="query"` und testen Sie das Formular erneut.
    - Betrachten Sie die URL in der Adresszeile des Browsers.<br/><br/>
- Ändern Sie `name="query"` zu `name="find"` und testen Sie das Formular erneut.
    - Betrachten Sie die URL in der Adresszeile des Browsers.

<LiveSandbox
    storageKey="10_Requests_form1"
    noInline={false}
    code={`<div>
   <p>Request per Formular</p>
</div>
`}
/>

---

## Request über Button und javascript

Wenn man auf einen Button klickt, kann ein JavaScript-Code ausgeführt werden.<br/>
Und damit kann man über die _location.ref = "URL"_ einen Request auslösen.

Beispiel:

```html
<button
  onClick={() => {
    console.log("Button geklickt");
    (window.location.href = "https://www.google.ch/search?q=React+JS")
  }}>
  Suche React JS
</button>

```

Variante über `<input>` Tag type="button":

```html
<input
    type="button"
    value="Suche Vue JS"
    onClick= `hier kommt der JavaScript-Code hin`
/>
```

---

## Interaktive Übung zu Button

**Wichtig**:

- `<div>` Tag nicht entfernen
- Vorsichtig sein, die vielen Klammern sind tricky.

**Aufgabe:**

- Übernehmen Sie das Beispiel mit dem `<button>` Tag.
- Testen Sie, ob der Button funktioniert.
- Wie ist die URL im Browser zusammengesetzt?<br/><br/>
- Übernehmen Sie das Beispiel mit dem `<input>` Tag.<br/>
- ACHTUNG: Sie müssen den JavaScript-Code ergänzen!<br/>
- Testen Sie, ob der Button funktioniert.
- Wie ist die URL im Browser zusammengesetzt?

<LiveSandbox
    storageKey="10_Requests_form2"
    noInline={false}
    code={`<div>
   <p>Request per Button</p>
</div>
`}
/>

---

## Interaktive Aufgabe: Kombination von Input und Button

Eingabe des Suchstrings über ein Inputfeld

```html
<input id="query" placeholder="Suchbegriff" />
```

Aktivierung über Button

```html
<button
  onClick= {() => {
    console.log("Button geklickt");
    {/* hier kommt das weitere Script */}
  }}
>
  Suche
</button>
```

Das JavaScript holt den Wert des Input-Feldes mit der id="query" und hängt in an URL an.<br/>

**ACHTUNG:** Das ist mal ausnahmsweise reines JavaScript und nicht React! React verwendet _document.getElementById_ nicht!

```html
    const q = document.getElementById("query").value;
    window.location.href =
      "https://www.google.ch/search?q=" + encodeURIComponent(q);
```

**Aufgabe:**

- Bauen Sie Input, Button und das JavaScript zusammen.
- Testen Sie die Funktionalität.

<LiveSandbox
    storageKey="10_Requests_buttonAndInput"
    noInline={false}
    code={`<div>
   <p>Request per Input and Button</p>
</div>
`}
/>






